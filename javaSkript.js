
let recepti=[
    {
        imeJela:"Brza štrudla sa makom",
        uputstvo:"_",
        tezina:"4",
        trajanje:"60",
        grupa:"uzina",
        ocene:[],
        komentari:[],
        sastojci:"200 ml toplog mleka, 1 kašika šećera ,10 gr suvog kvasca, 1 jaje 1 belance ( žumance ide za premazivanje ), 125 gr maslaca, oko 500 gr brašna,  200 gr mlevenog maka, 200 ml mleka 3 kašike griza, 5 kašika šećera ( moglo je više, moji su rekli da može sladje )",
        prosecnaOcena:"_"

    },
    {
        imeJela:"Coleslaw salata – Kolslou salata",
        uputstvo:"_",
        tezina:"2",
        trajanje:"15",
        grupa:"uzina",
        ocene:[],
        komentari:[],
        sastojci:"1/4 svežeg kupusa ( glavica kupusa srednje veličine ) ,2 šargarepe, nemojte da budu baš male, ako jesu onda 3 ,nekoliko perca mladog luka ( može i ne mora, zavisno da li je sezona ) 2 kisela krastavčića srednje veličine, po ukusu može i više, ali nemojte manje, 90 gr majoneza, 150 ml gustog jogurta, 1 čep jabukovog sirćeta ili limunovog soka jedna kašika, 5 gr soli po ukusu, biber ( nemojte ga izostaviti )",
        prosecnaOcena:"_"

    },
    {
        imeJela:"Cezar salata",
        uputstvo:"_",
        tezina:"2",
        trajanje:"20",
        grupa:"uzina",
        ocene:[],
        komentari:[],
        sastojci:"100 g pilećeg belog mesa, nekoliko listova zelene salate, 30 g parmezana, so i biber, po ukusu, 1 krišk hleba , 30 ml ulja 1 čena belog luka, ½ kašičice senfa, nekoliko kapi soka od limuna, ½ kašikice soli, 1 kašika maslinovog ulja, 1 čen belog luka, 1 kašika pavlake, 2 kašike majoneza",
        prosecnaOcena:"_"

    },
   
    {
        imeJela:"Kroasani sa nutelom",
        uputstvo:"_",
        tezina:"3",
        trajanje:"30",
        grupa:"uzina",
        ocene:[],
        komentari:[],
        sastojci:"500 ml vode, 1 kašika šećera, 1 ravna kašičica soli, 40 gr svežeg ili 10 gr suvog kvasca, 100 ml ulja 1 kg mekog brašna 250 – 300 gr  margarina ili maslaca",
        prosecnaOcena:"_"

    },
    {
        imeJela:"Sareni rolat",
        uputstvo:"_",
        tezina:"3",
        trajanje:"35",
        grupa:"predjelo",
        ocene:[],
        komentari:[],
        sastojci:"4 cela jaja, 200 ml jogurta, 5 punih kašika brašna, pola kašičice soli , 10 gr praška za pecivo, 1 kašičica crvene paprike, 3 – 4 briketa spanaća ili 100 gr blanširanog i iseckanog       Nadev – po želji, a u receptu: 250 gr sitnog sira ,180 gr pavlake, 3-4 kisela krastavčića, 150 gr šunke ili šunkarice malo soli",
        prosecnaOcena:"_"

    },
    {
        imeJela:"Pitice sa sirom",
        uputstvo:"_",
        tezina:"4",
        trajanje:"40",
        grupa:"predjelo",
        ocene:[],
        komentari:[],
        sastojci:"500 gr tankih kora za pite,500 gr sitnog sira,180 gr ( jedna čaša ) kiselog mleka,1 jaje,1 kašičica soli ( ili po ukusu ),100 ml ulja",
        prosecnaOcena:"_"

    },
    {
        imeJela:"Gurmanska punjena jaja",
        uputstvo:"_",
        tezina:"2",
        trajanje:"15",
        grupa:"predjelo",
        ocene:[],
        komentari:[],
        sastojci:"5 tvdo kuvanih jaja,3 kašike majoneza,na vrh kašičice senfa,1 kiseli krastavčić,malo soli i bibera ( biber dodajte po ukusu ),malo crvene, ljute paprike",
        prosecnaOcena:"_"

    },
    {
        imeJela:"Čoko moko torta sa malinama",
        uputstvo:"_",
        tezina:"5",
        trajanje:"60",
        grupa:"desert",
        ocene:[],
        komentari:[],
        sastojci:"1 pakovanje gotovih kora, okrugle, 3 komada,500 gr kisele pavlake,300 gr mlevenog plazma keksa,150 – 200 gr šećera u prahu,100 ml mleka,400 ml kisele vode,300 gr šlaga ( umesto šlaga može 500 ml slatke pavlake, oduzmit ei kiselu vodu ),300 – 400 gr malina ( u videu utrošeno 300 gr, mogu i sveže i smrznute ),400 – 500 ml čokoladnog mleka",
        prosecnaOcena:"_"

    },
    {
        imeJela:"Čoko princes krofne",
        uputstvo:"_",
        tezina:"3",
        trajanje:"30",
        grupa:"desert",
        ocene:[],
        komentari:[],
        sastojci:"100 ml ulja,200 ml vode,140 gr oštrog brašna,30 gr kakaa,4 cela jaja,6 žumanaca,750 ml mleka,180 gr šećera,90 gr gustina,100 gr maslaca,100 gr crne čokolade,500 ml slatke pavlake",
        prosecnaOcena:"_"

    },
    {
        imeJela:"Munchmallow keksići",
        uputstvo:"_",
        tezina:"4",
        trajanje:"45",
        grupa:"desert",
        ocene:[],
        komentari:[],
        sastojci:"1 jaje,70 gr šećera,60 gr omekšalog maslaca,130 ml mleka,1 prašak za pecivo od 10 gr,1 puna kašika kakaoa,180gr brašna,30 ml vode + 8 gr želatina,30 ml soka od limuna,50 ml vode,110 gr šećera",
        prosecnaOcena:"_"

    },
    {
        imeJela:"Svinjski vrat na luku iz rerne",
        uputstvo:"_",
        tezina:"4",
        trajanje:"45",
        grupa:"glavno",
        ocene:[],
        komentari:[],
        sastojci:"1,5 kg svinjskog vrata sa kostima,4 – 5 glavica crnog luka zavisno od veličine,1 kašika suvog začina,biber, peršunov list, kurkuma, malo crvene sitne paprike,100 ml ulja",
        prosecnaOcena:"_"

    },
    {
        imeJela:"Pariske snicle",
        uputstvo:"_",
        tezina:"5",
        trajanje:"60",
        grupa:"glavno",
        ocene:[],
        komentari:[],
        sastojci:"snicle, koje god da odaberete, tanko isečene i izlupane,2-3 jaja,na 1 jaje idu 2 kašike mleka,meko brašno,so i biber",
        prosecnaOcena:"_"

    },
    {
        imeJela:"Belo meso u slanini iz rerne",
        uputstvo:"_",
        tezina:"3",
        trajanje:"40",
        grupa:"glavno",
        ocene:[],
        komentari:[],
        sastojci:"2 pileća bela mesa sa kožom i kostima – gde skinete koti i kožicu i iskoristite ih za supicu ili samo kupite 4 veća pileća filea,200 gr tanko isečene slanine,so i biber,1 kašika brašna,1 kašika pavlake,1 kašičica suvog začina,1 kašičica sušenog peršunovog lista",
        prosecnaOcena:"_"

    }
   
   
   ]
   
       
       let  mojiRecepti=[
            {
        imeJela:"",
        uputstvo:"",
        tezina:"",
        trajanje:"",
        grupa:"",
        ocene:[],
        komentari:[],
        sastojci:"",
        prosecnaOcena:""
            }]



       let  mojiKomentari=[
           {
               imeJela:"",
               komentar:""

           }
       ]
        let  mojeOcene=[
            {
                imeJela:"",
                ocena:""
 
            }

        ]
       
   





function ucitajGlavna()
{
let grupa="glavno";
localStorage.setItem("grupa",JSON.stringify(grupa));
ucitajGrupuJela(grupa);
}

function ucitajDeserte()
{
    let grupa="desert";
    localStorage.setItem("grupa",JSON.stringify(grupa));
ucitajGrupuJela(grupa);
}

function ucitajPredjela()
{

    let grupa="predjelo";
    localStorage.setItem("grupa",JSON.stringify(grupa));
ucitajGrupuJela(grupa);
}

function ucitajUzine()
{

    let grupa="uzina";
    localStorage.setItem("grupa",JSON.stringify(grupa));
ucitajGrupuJela(grupa);

}


function ucitajGrupuJela( grupa)
{
    recepti=JSON.parse(localStorage.getItem("recepti"));
  
        for (let i=0;i<recepti.length;i++)
     {
       
        
        
 

    if (recepti[i].grupa!=grupa)
  continue;
            
         
         
        
         
         
         let red=$("<tr></tr>");
       
            let celija1=$("<td></td>").append(recepti[i].imeJela);
            let celija2=$("<td></td>").append(recepti[i].trajanje);
            let celija3=$("<td></td>").append(recepti[i].tezina);
            let celija4=$("<td></td>").append(recepti[i].prosecnaOcena);
            var a = $('<a> Detaljnije </a>').attr('href','SablonZaRecept.html').on( "click", function() {
                localStorage.setItem("recept",i) 
              });
           
            let celija5=$("<td></td>").append(a);
        
        

            red.append(celija1);
            red.append(celija2);

            red.append(celija3);

            red.append(celija4);
            red.append(celija5);



        
            if (grupa=="glavno")
            $("#tabelaGlavno").append(red);
            else if (grupa=="predjelo")
            $("#tabelaPredjelo").append(red);
            else if (grupa=="uzina")
            $("#tabelaUzina").append(red);
            else if (grupa=="desert")
            $("#tabelaDesert").append(red);
    }
   
  
}
function ucitajGrupuJelasaNazivom( grupa,naziv)
{
    recepti=JSON.parse(localStorage.getItem("recepti"));
  

    

        for (let i=0;i<recepti.length;i++)
     {
       
        
        
 

    if (recepti[i].grupa!=grupa || !(recepti[i].imeJela.match(naziv)))
  continue;
      
  
         
         
        
         
         
         let red=$("<tr></tr>");
       
            let celija1=$("<td></td>").append(recepti[i].imeJela);
            let celija2=$("<td></td>").append(recepti[i].trajanje);
            let celija3=$("<td></td>").append(recepti[i].tezina);
            let celija4=$("<td></td>").append(recepti[i].prosecnaOcena);
            var a = $('<a> Detaljnije </a>').attr('href','SablonZaRecept.html').on( "click", function() {
                localStorage.setItem("recept",i) 
              });
           
            let celija5=$("<td></td>").append(a);
        
        

            red.append(celija1);
            red.append(celija2);

            red.append(celija3);

            red.append(celija4);
            red.append(celija5);


        if (grupa=="glavno")
        $("#tabelaGlavno").append(red);
        else if (grupa=="predjelo")
        $("#tabelaPredjelo").append(red);
        else if (grupa=="uzina")
        $("#tabelaUzina").append(red);
        else if (grupa=="desert")
        $("#tabelaDesert").append(red);

        
    }
   
  
}

function oceni()
{

    

    let ocena=document.getElementById("ocena5").value;

    ocena1=parseInt(ocena);
   
    let i=JSON.parse(localStorage.getItem("recept"));
   

   
    recepti=JSON.parse(localStorage.getItem("recepti"));
    



    mojeOcene=JSON.parse(localStorage.getItem("mojeOcene"));



    let ime=recepti[i].imeJela;

    mojeOcene.push(
        {
            imeJela:ime,
            ocena:ocena1
        }
    );
    localStorage.setItem("mojeOcene",JSON.stringify(mojeOcene));
   



    recepti[i].ocene.push(ocena1);
    let suma=0;

    for(let j=0;j<recepti[i].ocene.length;j++)
    {
        suma=suma+recepti[i].ocene[j];
    }
   


   

    let prosecna=suma/recepti[i].ocene.length;

    recepti[i].prosecnaOcena=prosecna;



    
    

    localStorage.setItem("recepti",JSON.stringify(recepti));
    

    alert("Ocena uspešno dodata!");


}

function sortirajPoOceni()
{
    soritrajPoOceni1(recepti);
    localStorage.setItem("recepti",JSON.stringify(recepti));
    alert("Recepti usepesno sortirani,osvezite stranicu!");
 
    

}

function soritrajPoOceni1(niz)
{

    let tmp;
    for(let i=0;i<niz.length-1;i++)
        for (let j=i+1;j<niz.length;j++)
        {
            if(niz[j].prosecnaOcena<niz[i].prosecnaOcena)
            {
                tmp=niz[j];
                niz[j]=niz[i];
                niz[i]=tmp;
            }
        }


}

function sortirajPoTezini()
{
    soritrajPoTezini1(recepti);
    localStorage.setItem("recepti",JSON.stringify(recepti));
    alert("Recepti usepesno sortirani,osvezite stranicu!");
    
    
}




function soritrajPoTezini1(niz)
{

    let tmp;
    for(let i=0;i<niz.length-1;i++)
        for (let j=i+1;j<niz.length;j++)
        {
            if(niz[j].tezina<niz[i].tezina)
            {
                tmp=niz[j];
                niz[j]=niz[i];
                niz[i]=tmp;
            }
        }
   

}





function inicijalizujPodatke()
{    

 let recepti1=localStorage.getItem("recepti");

 if (recepti1!=null)
 {
    recepti=JSON.parse(recepti1);

 }
 else{
     localStorage.setItem("recepti",JSON.stringify(recepti));

 }


 let mojiRecepti1=localStorage.getItem("mojiRecepti");

 if (mojiRecepti!=null)
 {
    mojiRecepti=JSON.parse(mojiRecepti1);

 }
 else{
     localStorage.setItem("mojiRecepti",JSON.stringify(mojiRecepti));

 }

 let mojiKomentari1=localStorage.getItem("mojiKomentari");

 if (mojiKomentari1!=null)
 {
    mojiKomentari=JSON.parse(mojiKomentari1);

 }
 else{
     localStorage.setItem("mojiKomentari",JSON.stringify(mojiKomentari));

 }

 let mojeOcene1=localStorage.getItem("mojeOcene");

 if (mojeOcene1!=null)
 {
    mojeOcene=JSON.parse(mojeOcene1);

 }
 else{
     localStorage.setItem("mojeOcene",JSON.stringify(mojeOcene));

 }


}


function dodajRecept()
{
   
    let element;

    let ime;
    let up;
    let gru;
    let traj;
    let tez;
    let sas;

    element=document.getElementById("name-331c");
    if (element != null && element.value!="") {
        ime = element.value;
    }
    else {
        alert("IME NIJE UNESENO!")
        return;
    }
   element=document.getElementById("uputstvo");
    if (element != null && element.value!="") {
        up = element.value;
    }
    else {
        alert("UPUTSTVO NIJE UNESENO!")
        return;
    }
    element=document.getElementById("select-0c3d");
    if (element != null && element.value!="") {
        gru = element.value;
    }
    else {
        alert("GRUPA NIJE UNESENA!")
        return;
    }
    element =document.getElementById("email-331c");
    if (element != null && element.value!="") {
        traj = element.value;
    }
    else {
        alert("TRAJANJE NIJE UNESENO!")
        return;
    }
    element =document.getElementById("text-fa11");
    if (element != null && element.value!="") {
        tez = element.value;
    }
    else {
        alert("TEZINA NIJE UNESENA!")
        return;
    }
    element =document.getElementById("sastojci");
    if (element != null&& element.value!="") {
        sas = element.value;
    }
    else {
        alert("SASTOJCI NISU UNESENI");
        return;
    }

    /*
     imeJela:"Munchmallow keksići",
        uputstvo:"_",
        tezina:"4",
        trajanje:"45",
        grupa:"desert",
        ocene:[],
        komentari:[],
        sastojci:"1 jaje,70 gr šećera,60 gr omekšalog maslaca,130 ml mleka,1 prašak za pecivo od 10 gr,1 puna kašika kakaoa,180gr brašna,30 ml vode + 8 gr želatina,30 ml soka od limuna,50 ml vode,110 gr šećera",
        prosecnaOcena:"_"
    */

    recepti.push(
        {
            imeJela:ime,
            uputstvo:up,
            tezina:tez,
            trajanje:traj,
            sastojci:sas,
            grupa:gru,
            ocene:[],
            komentari:[],
            prosecnaOcena:"_"
        }
    );

   

    localStorage.setItem("recepti",JSON.stringify(recepti));


     mojiRecepti.push( {

        imeJela:ime,
        uputstvo:up,
        tezina:tez,
        trajanje:traj,
        sastojci:sas,
        grupa:gru,
        ocene:[],
        komentari:[],
        prosecnaOcena:"_"
    });
    localStorage.setItem("mojiRecepti",JSON.stringify(mojiRecepti));

    alert("RECEPT JE USPESNO DODAT");
   
}




function prikaziSveRecepte()
{
    //alert(localStorage.getItem("recepti"));

    alert(JSON.stringify(recepti));
}


function prikaziMojeRecepte()
{
    alert(JSON.stringify(mojiRecepti));
}



    function obrisiSveRecepte()
    {
        
        recepti=[
            {
                imeJela:"Brza štrudla sa makom",
                uputstvo:"_",
                tezina:"4",
                trajanje:"60",
                grupa:"uzina",
                ocene:[],
                komentari:[],
                sastojci:"200 ml toplog mleka, 1 kašika šećera ,10 gr suvog kvasca, 1 jaje 1 belance ( žumance ide za premazivanje ), 125 gr maslaca, oko 500 gr brašna,  200 gr mlevenog maka, 200 ml mleka 3 kašike griza, 5 kašika šećera ( moglo je više, moji su rekli da može sladje )",
                prosecnaOcena:"_"
        
            },
            {
                imeJela:"Coleslaw salata – Kolslou salata",
                uputstvo:"_",
                tezina:"2",
                trajanje:"15",
                grupa:"uzina",
                ocene:[],
                komentari:[],
                sastojci:"1/4 svežeg kupusa ( glavica kupusa srednje veličine ) ,2 šargarepe, nemojte da budu baš male, ako jesu onda 3 ,nekoliko perca mladog luka ( može i ne mora, zavisno da li je sezona ) 2 kisela krastavčića srednje veličine, po ukusu može i više, ali nemojte manje, 90 gr majoneza, 150 ml gustog jogurta, 1 čep jabukovog sirćeta ili limunovog soka jedna kašika, 5 gr soli po ukusu, biber ( nemojte ga izostaviti )",
                prosecnaOcena:"_"
        
            },
            {
                imeJela:"Cezar salata",
                uputstvo:"_",
                tezina:"2",
                trajanje:"20",
                grupa:"uzina",
                ocene:[],
                komentari:[],
                sastojci:"100 g pilećeg belog mesa, nekoliko listova zelene salate, 30 g parmezana, so i biber, po ukusu, 1 krišk hleba , 30 ml ulja 1 čena belog luka, ½ kašičice senfa, nekoliko kapi soka od limuna, ½ kašikice soli, 1 kašika maslinovog ulja, 1 čen belog luka, 1 kašika pavlake, 2 kašike majoneza",
                prosecnaOcena:"_"
        
            },
           
            {
                imeJela:"Kroasani sa nutelom",
                uputstvo:"_",
                tezina:"3",
                trajanje:"30",
                grupa:"uzina",
                ocene:[],
                komentari:[],
                sastojci:"500 ml vode, 1 kašika šećera, 1 ravna kašičica soli, 40 gr svežeg ili 10 gr suvog kvasca, 100 ml ulja 1 kg mekog brašna 250 – 300 gr  margarina ili maslaca",
                prosecnaOcena:"_"
        
            },
            {
                imeJela:"Sareni rolat",
                uputstvo:"_",
                tezina:"3",
                trajanje:"35",
                grupa:"predjelo",
                ocene:[],
                komentari:[],
                sastojci:"4 cela jaja, 200 ml jogurta, 5 punih kašika brašna, pola kašičice soli , 10 gr praška za pecivo, 1 kašičica crvene paprike, 3 – 4 briketa spanaća ili 100 gr blanširanog i iseckanog       Nadev – po želji, a u receptu: 250 gr sitnog sira ,180 gr pavlake, 3-4 kisela krastavčića, 150 gr šunke ili šunkarice malo soli",
                prosecnaOcena:"_"
        
            },
            {
                imeJela:"Pitice sa sirom",
                uputstvo:"_",
                tezina:"4",
                trajanje:"40",
                grupa:"predjelo",
                ocene:[],
                komentari:[],
                sastojci:"500 gr tankih kora za pite,500 gr sitnog sira,180 gr ( jedna čaša ) kiselog mleka,1 jaje,1 kašičica soli ( ili po ukusu ),100 ml ulja",
                prosecnaOcena:"_"
        
            },
            {
                imeJela:"Gurmanska punjena jaja",
                uputstvo:"_",
                tezina:"2",
                trajanje:"15",
                grupa:"predjelo",
                ocene:[],
                komentari:[],
                sastojci:"5 tvdo kuvanih jaja,3 kašike majoneza,na vrh kašičice senfa,1 kiseli krastavčić,malo soli i bibera ( biber dodajte po ukusu ),malo crvene, ljute paprike",
                prosecnaOcena:"_"
        
            },
            {
                imeJela:"Čoko moko torta sa malinama",
                uputstvo:"_",
                tezina:"5",
                trajanje:"60",
                grupa:"desert",
                ocene:[],
                komentari:[],
                sastojci:"1 pakovanje gotovih kora, okrugle, 3 komada,500 gr kisele pavlake,300 gr mlevenog plazma keksa,150 – 200 gr šećera u prahu,100 ml mleka,400 ml kisele vode,300 gr šlaga ( umesto šlaga može 500 ml slatke pavlake, oduzmit ei kiselu vodu ),300 – 400 gr malina ( u videu utrošeno 300 gr, mogu i sveže i smrznute ),400 – 500 ml čokoladnog mleka",
                prosecnaOcena:"_"
        
            },
            {
                imeJela:"Čoko princes krofne",
                uputstvo:"_",
                tezina:"3",
                trajanje:"30",
                grupa:"desert",
                ocene:[],
                komentari:[],
                sastojci:"100 ml ulja,200 ml vode,140 gr oštrog brašna,30 gr kakaa,4 cela jaja,6 žumanaca,750 ml mleka,180 gr šećera,90 gr gustina,100 gr maslaca,100 gr crne čokolade,500 ml slatke pavlake",
                prosecnaOcena:"_"
        
            },
            {
                imeJela:"Munchmallow keksići",
                uputstvo:"_",
                tezina:"4",
                trajanje:"45",
                grupa:"desert",
                ocene:[],
                komentari:[],
                sastojci:"1 jaje,70 gr šećera,60 gr omekšalog maslaca,130 ml mleka,1 prašak za pecivo od 10 gr,1 puna kašika kakaoa,180gr brašna,30 ml vode + 8 gr želatina,30 ml soka od limuna,50 ml vode,110 gr šećera",
                prosecnaOcena:"_"
        
            },
            {
                imeJela:"Svinjski vrat na luku iz rerne",
                uputstvo:"_",
                tezina:"4",
                trajanje:"45",
                grupa:"glavno",
                ocene:[],
                komentari:[],
                sastojci:"1,5 kg svinjskog vrata sa kostima,4 – 5 glavica crnog luka zavisno od veličine,1 kašika suvog začina,biber, peršunov list, kurkuma, malo crvene sitne paprike,100 ml ulja",
                prosecnaOcena:"_"
        
            },
            {
                imeJela:"Pariske snicle",
                uputstvo:"_",
                tezina:"5",
                trajanje:"60",
                grupa:"glavno",
                ocene:[],
                komentari:[],
                sastojci:"snicle, koje god da odaberete, tanko isečene i izlupane,2-3 jaja,na 1 jaje idu 2 kašike mleka,meko brašno,so i biber",
                prosecnaOcena:"_"
        
            },
            {
                imeJela:"Belo meso u slanini iz rerne",
                uputstvo:"_",
                tezina:"3",
                trajanje:"40",
                grupa:"glavno",
                ocene:[],
                komentari:[],
                sastojci:"2 pileća bela mesa sa kožom i kostima – gde skinete koti i kožicu i iskoristite ih za supicu ili samo kupite 4 veća pileća filea,200 gr tanko isečene slanine,so i biber,1 kašika brašna,1 kašika pavlake,1 kašičica suvog začina,1 kašičica sušenog peršunovog lista",
                prosecnaOcena:"_"
        
            }
           
           
           ];
        localStorage.setItem("recepti",JSON.stringify(recepti));
        mojiRecepti=[
            {
        imeJela:"",
        uputstvo:"",
        tezina:"",
        trajanje:"",
        grupa:"",
        ocene:[],
        komentari:[],
        sastojci:"",
        prosecnaOcena:""
            }];


            localStorage.setItem("mojiRecepti",JSON.stringify(mojiRecepti));
            localStorage.setItem("mojeOcene",JSON.stringify(mojeOcene));
            localStorage.setItem("mojiKomentari",JSON.stringify(mojiKomentari));

    }
 
  
function prikaziRecept()
{
    let i=JSON.parse(localStorage.getItem("recept"));

    recepti=JSON.parse(localStorage.getItem("recepti"));

    let noviii=$("<li></li>").append(recepti[i].grupa);

        $("#ovdetreba").append(noviii);

    
        let noviiii=$("<li></li>").append(recepti[i].imeJela);

        $("#ovdetreba").append(noviiii);    

    let naziv=document.getElementById("naziv1");
    naziv.innerHTML=recepti[i].imeJela;
    let sastojci=document.getElementById("sastojci1");
    sastojci.innerHTML=recepti[i].sastojci;
    let uputstvo=document.getElementById("uputstvo1");
    uputstvo.innerHTML=recepti[i].uputstvo;
    let vreme=document.getElementById("vreme1");
    vreme.innerHTML=recepti[i].trajanje;
    let ocena=document.getElementById("ocena1");
    ocena.innerHTML=recepti[i].prosecnaOcena;
    let tezina=document.getElementById("tezina1");
    tezina.value=recepti[i].tezina;


   if (recepti[i].komentari.length>0)
   {

    for (let j=0;j<recepti[i].komentari.length;j++)
    {
        let red=$("<tr></tr>");
      
        let celija=$("<td></td>").append(recepti[i].komentari[j])
       

        red.append(celija);


          

       $("#tablica1").append(red);

    }
}
}

function traziPoNazivu()            
{
    
    let naziv;
   
    let grupa=JSON.parse(localStorage.getItem("grupa"));

    if (grupa=="glavno")
    {
    naziv=document.getElementById('nazivZaPretraguGlavno').value;
   
    var Table = document.getElementById("tabelaGlavno");
Table.innerHTML = "";

    }
    else if(grupa=="predjelo")
    {
    naziv=document.getElementById("nazivZaPretraguPredjelo").value;
   
    var Table = document.getElementById("tabelaPredjelo");
Table.innerHTML = "";

    }
    else
     if(grupa=="desert")

     {
      naziv=document.getElementById("nazivZaPretraguDesert").value
      var Table = document.getElementById("tabelaDesert");
Table.innerHTML = "";
     }
     else if (grupa=="uzina")

     {
     naziv=document.getElementById("nazivZaPretraguUzina").value;
     var Table = document.getElementById("tabelaUzina");
Table.innerHTML = "";

     }


    
    
    ucitajGrupuJelasaNazivom( grupa,naziv);

}


function dodajKomentar()
{
    let i=JSON.parse(localStorage.getItem("recept"));

    let komentar1=document.getElementById("dodajKomentar").value;

    recepti[i].komentari.push(komentar1);
   


    localStorage.setItem("recepti",JSON.stringify(recepti));


    mojiKomentari=JSON.parse(localStorage.getItem("mojiKomentari"));

let ime=recepti[i].imeJela;

    mojiKomentari.push(
        {
            imeJela:ime,
            komentar:komentar1
        }
    );


    localStorage.setItem("mojiKomentari",JSON.stringify(mojiKomentari));

    alert("Komentar uspešno dodat!");
}
function exportPDF(){
    var doc = new jsPDF();
    var specialElementHandlers = {
        '#editor': function (element, renderer) {
            return true;
        }
    };

    $('#cmd').click(function () {
        doc.fromHTML($('#content').html(), 15, 15, {
            'width': 170,
                'elementHandlers': specialElementHandlers
        });
        doc.save('sample-file.pdf');
    });
}
function inicijalizujMojNalog()
{


mojiRecepti=JSON.parse(localStorage.getItem("mojiRecepti"));


    for (let i=0;i<mojiRecepti.length;i++)
    {
        
            let red=$("<tr></tr>");


            
       
            let celija1=$("<td></td>").append(mojiRecepti[i].imeJela);
            let celija2=$("<td></td>").append(mojiRecepti[i].trajanje);
            let celija3=$("<td></td>").append(mojiRecepti[i].tezina);
            let celija4=$("<td></td>").append(mojiRecepti[i].prosecnaOcena);
            let celija5=$("<td></td>").append(mojiRecepti[i].sastojci);
            let celija6=$("<td></td>").append(mojiRecepti[i].uputstvo);
            //id mora svaki da ima razlicit
            var a = $('<button> Ukloni </button>').attr('id','ukloni'+i).attr('value',i).attr('class',"ukloni567").on( "click", function() {
                let i=$(this).val();
              
                mojiRecepti.splice(i,1); 
                localStorage.setItem("mojiRecepti",JSON.stringify(mojiRecepti));
                alert("Obrisan recept,refresujte stranicu!");

               
              });
           
            let celija7=$("<td></td>").append(a);
        
        

            red.append(celija1);
            red.append(celija2);

            red.append(celija3);

            red.append(celija4);
            red.append(celija5);
             red.append(celija6);
              red.append(celija7);


       
        $("#mojiRecepti").append(red);
       

        

    }
    mojiKomentari=JSON.parse(localStorage.getItem("mojiKomentari"));


    /////////alert(mojiKomentari);

    for (let j=0;j<mojiKomentari.length;j++)
    {
       
        let red=$("<tr></tr>");

        let celija1=$("<td></td>").append(mojiKomentari[j].imeJela);
        let celija2=$("<td></td>").append(mojiKomentari[j].komentar);


        red.append(celija1);
        red.append(celija2);

        $("#mojiKomentari").append(red);
    }


    mojeOcene=JSON.parse(localStorage.getItem("mojeOcene"));
    for (let l=0;l<mojeOcene.length;l++)
    {
       
        let red=$("<tr></tr>");

        let celija1=$("<td></td>").append(mojeOcene[l].imeJela);
        let celija2=$("<td></td>").append(mojeOcene[l].ocena);


        red.append(celija1);
        red.append(celija2);

        $("#mojeOcene").append(red);
    }
    
}
